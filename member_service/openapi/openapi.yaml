---
openapi: 3.0.3
info:
  title: Member Service API
  description: REST API for managing Descope members within tenants
  contact:
    name: Fullbay Team
  version: 1.0.0
servers:
- url: http://localhost:8080
  description: Auto generated value
- url: http://0.0.0.0:8080
  description: Auto generated value
tags:
- name: Members
  description: Operations for managing Descope members within tenants
- name: Users
  description: Operations for looking up Descope users
paths:
  /tenants/{tenantId}/members:
    get:
      tags:
      - Members
      summary: List all members
      description: Retrieves all members in the specified tenant with pagination support
      parameters:
      - name: tenantId
        in: path
        description: Tenant unique identifier
        required: true
        schema:
          type: string
      - name: page
        in: query
        description: Page number (0-indexed)
        schema:
          format: int32
          default: 0
          type: integer
        example: 0
      - name: pageSize
        in: query
        description: Number of items per page
        schema:
          format: int32
          default: 20
          type: integer
        example: 20
      responses:
        "200":
          description: Members retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    post:
      tags:
      - Members
      summary: Create a new member
      description: Creates a new member in the specified tenant
      parameters:
      - name: tenantId
        in: path
        description: Tenant unique identifier
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MemberRequest"
      responses:
        "201":
          description: Member created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Member"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /tenants/{tenantId}/members/{loginId}:
    get:
      tags:
      - Members
      summary: Get member by login ID
      description: Retrieves a member by their login ID from the specified tenant
      parameters:
      - name: loginId
        in: path
        description: Member login ID
        required: true
        schema:
          type: string
      - name: tenantId
        in: path
        description: Tenant unique identifier
        required: true
        schema:
          type: string
      responses:
        "200":
          description: Member found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Member"
        "404":
          description: Member not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    put:
      tags:
      - Members
      summary: Update member
      description: Updates an existing member's information in the specified tenant
      parameters:
      - name: loginId
        in: path
        description: Member login ID
        required: true
        schema:
          type: string
      - name: tenantId
        in: path
        description: Tenant unique identifier
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MemberRequest"
      responses:
        "200":
          description: Member updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Member"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    delete:
      tags:
      - Members
      summary: Delete member
      description: Deletes a member from the specified tenant by their login ID
      parameters:
      - name: loginId
        in: path
        description: Member login ID
        required: true
        schema:
          type: string
      - name: tenantId
        in: path
        description: Tenant unique identifier
        required: true
        schema:
          type: string
      responses:
        "204":
          description: Member deleted successfully
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /users/{userId}:
    get:
      tags:
      - Users
      summary: Get user by ID
      description: Retrieves basic user info by their Descope user ID
      parameters:
      - name: userId
        in: path
        description: Descope user ID
        required: true
        schema:
          type: string
      responses:
        "200":
          description: User found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserInfo"
        "404":
          description: User not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse1"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse1"
components:
  schemas:
    ErrorResponse:
      description: Error response information
      type: object
      properties:
        error:
          description: Error type
          type: string
          example: Failed to create member
        message:
          description: Detailed error message
          type: string
          example: Member email cannot be empty
    ErrorResponse1:
      description: Error response information
      type: object
      properties:
        error:
          description: Error type
          type: string
          example: User not found
        message:
          description: Detailed error message
          type: string
          example: User with ID xyz not found
    Member:
      description: Descope member information
      type: object
      properties:
        loginId:
          description: Unique member login identifier
          type: string
          example: john.doe@example.com
        name:
          description: Member display name
          type: string
          example: John Doe
        email:
          description: Member email address
          type: string
          example: john.doe@example.com
        phone:
          description: Member phone number
          type: string
          example: +1-555-0123
        tenantId:
          description: Tenant ID this member belongs to
          type: string
          example: T123456789
    MemberRequest:
      description: Request payload for creating or updating a member
      required:
      - email
      type: object
      properties:
        loginId:
          description: Unique member login identifier
          type: string
          example: john.doe@example.com
        name:
          description: Member display name
          type: string
          example: John Doe
        email:
          description: Member email address
          type: string
          example: john.doe@example.com
        phone:
          description: Member phone number
          type: string
          example: +1-555-0123
    PaginatedResponse:
      description: Paginated response containing items and pagination metadata
      type: object
      properties:
        items:
          description: List of items in the current page
          type: array
          items: {}
        page:
          format: int32
          description: Current page number (0-indexed)
          type: integer
          example: 0
        pageSize:
          format: int32
          description: Number of items per page
          type: integer
          example: 20
        totalItems:
          format: int64
          description: Total number of items across all pages
          type: integer
          example: 100
        totalPages:
          format: int32
          description: Total number of pages
          type: integer
          example: 5
    UserInfo:
      type: object
      properties:
        userId:
          type: string
        name:
          type: string
        email:
          type: string
