---
openapi: 3.0.3
info:
  title: Organization Service API
  description: REST API for managing Descope tenant organizations
  contact:
    name: Fullbay Team
  version: 1.0.0
servers:
- url: http://localhost:8080
  description: Auto generated value
- url: http://0.0.0.0:8080
  description: Auto generated value
tags:
- name: Tenants
  description: Operations for managing Descope tenants
paths:
  /tenants:
    get:
      tags:
      - Tenants
      summary: List all tenants
      description: Retrieves all tenants with pagination support
      parameters:
      - name: page
        in: query
        description: Page number (0-indexed)
        schema:
          format: int32
          default: 0
          type: integer
        example: 0
      - name: pageSize
        in: query
        description: Number of items per page
        schema:
          format: int32
          default: 20
          type: integer
        example: 20
      responses:
        "200":
          description: Tenants retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    post:
      tags:
      - Tenants
      summary: Create a new tenant
      description: Creates a new tenant in the Descope project
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TenantRequest"
      responses:
        "201":
          description: Tenant created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Tenant"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /tenants/{tenantId}:
    get:
      tags:
      - Tenants
      summary: Get tenant by ID
      description: Retrieves a tenant by its unique identifier
      parameters:
      - name: tenantId
        in: path
        description: Tenant unique identifier
        required: true
        schema:
          type: string
      responses:
        "200":
          description: Tenant found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Tenant"
        "404":
          description: Tenant not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    put:
      tags:
      - Tenants
      summary: Update tenant
      description: Updates an existing tenant's information
      parameters:
      - name: tenantId
        in: path
        description: Tenant unique identifier
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TenantRequest"
      responses:
        "200":
          description: Tenant updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Tenant"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    delete:
      tags:
      - Tenants
      summary: Delete tenant
      description: Deletes a tenant by its unique identifier
      parameters:
      - name: tenantId
        in: path
        description: Tenant unique identifier
        required: true
        schema:
          type: string
      responses:
        "204":
          description: Tenant deleted successfully
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
components:
  schemas:
    ErrorResponse:
      description: Error response information
      type: object
      properties:
        error:
          description: Error type
          type: string
          example: Failed to create tenant
        message:
          description: Detailed error message
          type: string
          example: Tenant name cannot be empty
    PaginatedResponse:
      description: Paginated response containing items and pagination metadata
      type: object
      properties:
        items:
          description: List of items in the current page
          type: array
          items: {}
        page:
          format: int32
          description: Current page number (0-indexed)
          type: integer
          example: 0
        pageSize:
          format: int32
          description: Number of items per page
          type: integer
          example: 20
        totalItems:
          format: int64
          description: Total number of items across all pages
          type: integer
          example: 100
        totalPages:
          format: int32
          description: Total number of pages
          type: integer
          example: 5
    Tenant:
      description: Descope tenant information
      type: object
      properties:
        id:
          description: Unique tenant identifier
          type: string
          example: T123456789
        name:
          description: Tenant name
          type: string
          example: Acme Corporation
    TenantRequest:
      description: Request payload for creating or updating a tenant
      required:
      - name
      type: object
      properties:
        name:
          description: Tenant name
          maxLength: 255
          minLength: 1
          pattern: \S
          type: string
          example: Acme Corporation
